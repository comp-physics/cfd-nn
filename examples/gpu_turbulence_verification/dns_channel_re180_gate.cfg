# DNS stability gate test â€” fast pass/fail for "won't blow up"
#
# Same physics as dns_channel_re180.cfg but shorter (2400 steps).
# Pass criteria (all must hold after trip is off at ~step 1200):
#   - No SAFETY triggers
#   - No NaN/Inf
#   - v_max < 200 (no energy pileup)
#   - dt > 5e-5 (no dt collapse)
#   - TURBULENT state maintained through step 2400
#
# Quick check: grep "SAFETY\|NaN\|diverged" <logfile> should return empty

Nx = 192
Ny = 96
Nz = 192
x_min = 0.0
x_max = 12.566370614
y_min = -1.0
y_max = 1.0
z_min = 0.0
z_max = 6.283185307

nu = 0.005555556
dp_dx = -1.0
rho = 1.0

stretch_y = true
stretch_beta = 2.0

turb_model = none

simulation_mode = unsteady
dt = 0.001
adaptive_dt = true
CFL_max = 0.15
CFL_xz = 0.30
dt_safety = 0.85
max_steps = 2400

convective_scheme = skew
time_integrator = rk3
perturbation_amplitude = 0.05

trip_enabled = true
trip_x_start = -1
trip_x_end = -1
trip_amplitude = 1.0
trip_duration = 0.20
trip_ramp_off_start = 0.10
trip_n_modes_z = 16
trip_force_w = true
trip_w_scale = 2.0

filter_strength = 0.03
filter_interval = 2

poisson_solver = mg
poisson_fixed_cycles = 16
poisson_max_vcycles = 16

output_dir = output/dns_gate/
write_fields = false
verbose = false
gpu_only_mode = true
perf_mode = true
