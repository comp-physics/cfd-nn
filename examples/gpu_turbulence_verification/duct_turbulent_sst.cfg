# 3D Turbulent Square Duct Flow - SST k-omega
# Demonstrates turbulent flow in a square duct
#
# Physics:
#   - Square duct: 2x2 cross-section (y,z in [-1,1])
#   - Periodic in streamwise (x) direction
#   - No-slip walls on all 4 sides
#   - Pressure gradient driven flow
#
# Key features to observe:
#   - Turbulent velocity profile (fuller than laminar)
#   - Higher skin friction than laminar Poiseuille
#   - Mean flow without secondary currents (SST limitation)

# Domain: 4*pi x 2 x 2 (longer streamwise for periodicity)
Nx = 32
Ny = 64
Nz = 64
x_min = 0.0
x_max = 12.566370614
y_min = -1.0
y_max = 1.0
z_min = -1.0
z_max = 1.0

# Physics - moderate Reynolds number
nu = 0.002
dp_dx = -1.0
rho = 1.0

# No stretching (walls on all sides - uniform better for corners)
stretch_y = false
stretch_z = false

# Turbulence: SST k-omega
turb_model = sst

# Time stepping - steady RANS
simulation_mode = steady
dt = 0.001
adaptive_dt = true
CFL_max = 0.8
max_steps = 30000
tol = 1e-7

# Numerical schemes
convective_scheme = central
time_integrator = euler

# Poisson solver - FFT1D for periodic x only
poisson_solver = auto
poisson_tol_rhs = 1e-6

# Output
output_dir = output/duct_turbulent_sst/
num_snapshots = 10
write_fields = true
postprocess = true
verbose = true
