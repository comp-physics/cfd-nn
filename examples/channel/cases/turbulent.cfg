# DNS-like Turbulent Channel Flow (no RANS model)
# Requires high Reynolds number and fine grid to resolve turbulence

simulation_mode = unsteady    # CRITICAL: Must be unsteady

# Fine grid for turbulence resolution
Nx = 256
Ny = 512

# Domain geometry
x_min = 0.0
x_max = 6.283185307179586    # 2*pi
y_min = -1.0
y_max = 1.0

# Higher Reynolds number (Re_tau ~ 300) for sustained turbulence
nu = 0.00666666   # = 1/300 (higher Re_tau)
# nu = 0.0033333333333333333   # = 1/300 (higher Re_tau)
dp_dx = -1.0                 # Strong pressure gradient

# Grid stretching near walls
stretch_y = true
stretch_beta = 2.5

# Time stepping (skew-symmetric is more stable than plain central)
dt = 0.00001                 # Small base dt
adaptive_dt = true
CFL_max = 0.3                # Skew-symmetric allows higher CFL than plain central

# Run for many time steps (turbulence needs time to develop with small dt)
max_iter = 1000000           # More iterations since dt is small
tol = 0.0                    # Not used in unsteady mode

# No turbulence model (DNS)
turb_model = none

# Numerical schemes
convective_scheme = skew_symmetric # Energy-conserving for DNS
# convective_scheme = skew_symmetric  # Energy-conserving for DNS

# Output
output_dir = output/
output_freq = 200           # Less frequent (since more iterations)
num_snapshots = 100          # More snapshots to see evolution
verbose = true
write_fields = true
postprocess = false          # Skip Poiseuille comparison (not steady)

# Poisson solver
poisson_tol = 1e-4
poisson_max_iter = 5
poisson_omega = 1.8

perturbation_amplitude = 15.0     # Moderate perturbation (reduced from 15.0)
